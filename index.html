<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lovable AI - Full Web Builder</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>

    <div class="container">
        <div class="header">
            <h1>✨ Lovable AI Builder</h1>
            <p>बताइये आप क्या बनाना चाहते हैं?</p>
        </div>

        <textarea id="prompt" placeholder="उदा. एक होटल बुकिंग वेबसाइट का होमपेज बनाओ जिसमें व्हाट्सएप बटन हो..."></textarea>
        
        <div class="btn-group">
            <button onclick="generateCode()">Create Website</button>
        </div>

        <div id="loader" class="loader">AI आपके लिए कोडिंग कर रहा है...</div>

        <div id="output-container">
            <h3>Live Preview:</h3>
            <iframe id="preview"></iframe>
            <button class="copy-btn" onclick="copyFullCode()">Code कॉपी करें</button>
        </div>
    </div>

    <script>
        // ⚠️ यहाँ अपनी असली API Key जरूर डालें, वरना AI काम नहीं करेगा
        const GEMINI_API_KEY = "YOUR_API_KEY_HERE"; 
        let lastGeneratedCode = "";

        async function generateCode() {
            const promptValue = document.getElementById('prompt').value;
            if (!promptValue) return alert("कुछ तो लिखो भाई!");

            document.getElementById('loader').style.display = "block";
            document.getElementById('output-container').style.display = "none";

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${GEMINI_API_KEY}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ 
                            parts: [{ 
                                text: `Generate a complete, modern, single-file HTML website for: ${promptValue}. Include CSS and JS inside the file. Give only the raw HTML code, no talk.` 
                            }] 
                        }]
                    })
                });

                const data = await response.json();
                
                if(!data.candidates) {
                    throw new Error("Invalid API Key or Limit reached");
                }

                let cleanCode = data.candidates[0].content.parts[0].text;
                
                // Markdown सफाई (AI कभी-कभी ```html लिख कर देता है उसे हटाना जरूरी है)
                cleanCode = cleanCode.replace(/```html/g, "").replace(/```/g, "").trim();
                lastGeneratedCode = cleanCode;

                // Preview दिखाना
                const iframe = document.getElementById('preview');
                iframe.srcdoc = cleanCode;

                document.getElementById('loader').style.display = "none";
                document.getElementById('output-container').style.display = "block";

            } catch (error) {
                console.error(error);
                alert("Error! शायद API Key गलत है या इंटरनेट बंद है।");
                document.getElementById('loader').style.display = "none";
            }
        }

        function copyFullCode() {
            if(!lastGeneratedCode) return;
            navigator.clipboard.writeText(lastGeneratedCode);
            alert("कोड कॉपी हो गया! अब आप इसे नई फाइल में सेव कर सकते हैं।");
        }
    </script>
</body>
</html>
